---
title: "Code Summary for CAD Project"
author: " FIT3164 Team 07: Danzel, Xinhao and Yiqiu"
date: "2020/8/15"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Introduction

This document contains all codes with comments written for **FIT3164 Team 07 Heart Disease Project** in 2020.
A useful reference of using R Markdown: <http://rmarkdown.rstudio.com>.

## Section 0: Install and load necessary libraries.
Installation:
```{r eval=FALSE}
install.packages("readxl")
install.packages("summarytools")
install.packages("stringr")
```

Loading:
```{r}
library(readxl)
library(summarytools)
library(stringr)
```

## Section 1: Data Preparation and Understanding.

This section includes reading, understanding and pre-processing of the Z-Alizadeh Sani dataset.

Note that Z-Alizadeh Sani dataset is available from: <https://archive.ics.uci.edu/ml/machine-learning-databases/00412/>.

Clear the work space before run the code.
```{r}
rm(list = ls())
```

Since *.csv* format is more code-friendly than *.xlsx* format, convert the type of the dataset:
```{r eval=FALSE}
write.csv(read_excel("Z_Alizadeh_Sani_Dataset.xlsx"), 
          'Z_Alizadeh_Sani_Dataset.csv', 
          row.names = FALSE)
```

Read the converted csv dataset as a dataframe, copy one .
```{r}
ZAS_Original = read.csv("Z_Alizadeh_Sani_Dataset.csv")
ZAS = ZAS_Original
```

Show the first 5 lines of the dataset to see what it looks like.
```{r}
head(ZAS)
```

Check the number of rows (patients) and columns (features).
```{r}
dim(ZAS)
```

There is a useless feature (Exertional CP) which have all values as N, remove this feature from the dataset.
```{r}
ZAS = ZAS[, !(colnames(ZAS) == "Exertional.CP")]
```

Convert all N / Y categorical features' values to binary (0 / 1).
```{r}

```

Convert values of Sex (Male / Female) and Cath (Normal / Cad) features to binary (0 / 1).
```{r}

```

Convert values of features  (Function Class, BBB, Region RWMA and VHD)with more than two categories to dummy.
```{r}
#Function Class
ZAS$Function.Class = as.factor(ZAS$Function.Class)
contrasts(ZAS$Function.Class) = contr.treatment(4)

#Region RWMA
#transfer the data type from integer to factor
ZAS$Region.RWMA = as.factor(ZAS$Region.RWMA)
contrasts(ZAS$Region.RWMA) = contr.treatment(5)

#BBB and VHD
contrasts(ZAS$BBB) = contr.treatment(3)

#VHD
contrasts(ZAS$VHD) = contr.treatment(4)
```


Split the dataset into train and test sets (in 70%-30% ratio).
```{r}
#set seed to make all teammates have the same random dataset
set.seed(3164)
#get 70% of the dataset to be training dataset
training.rows = sample(1:nrow(ZAS), 0.7*nrow(ZAS))
ZAS.train = ZAS[training.rows,]
#the rest of rows are testing dataset
ZAS.test = ZAS[-training.rows,]
```